<!doctype html>
<html lang="uk">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Softis — YouTube Assistant</title>
<meta name="description" content="Softis: озвучка, генерація зображень, субтитри — SPA з Supabase.">
<link rel="icon" href="logo_32.png">
<style>
:root{--bg:#0a0a10;--card:#12121b;--txt:#e7e8ee;--muted:#bfc2cf;--red:#ef4444;--border:#232332}
body[data-theme="LIGHT"]{--bg:#f6f7fb;--card:#ffffff;--txt:#13141b;--muted:#44485a;--red:#ef4444;--border:#e6e8f0}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--txt)}
.container{width:min(1120px,100% - 32px);margin:0 auto}
.topbar{position:sticky;top:0;z-index:50;background:color-mix(in srgb,var(--bg) 70%, black 30% / .7);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
.topbar-inner{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;padding:10px 0}
.brand{display:flex;gap:10px;align-items:center;font-weight:800}
.brand-icon{width:32px;height:32px;display:grid;place-items:center;background:#0b0d14;border:1px solid color-mix(in srgb,var(--red) 40%, var(--border));border-radius:10px}
.brand-icon img{width:22px;height:22px;display:block}
.mainnav{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.nav-pill,.pill{background:#14141c;color:#fff;border-radius:999px;border:1px solid color-mix(in srgb,var(--red) 40%, var(--border));padding:8px 14px;box-shadow:0 0 18px color-mix(in srgb,var(--red) 32%, transparent)}
body[data-theme="LIGHT"] .nav-pill,body[data-theme="LIGHT"] .pill{background:#1a1b22;color:#fff}
.nav-pill[aria-current="page"]{box-shadow:0 0 26px color-mix(in srgb,var(--red) 46%, transparent)}
.switcher{display:flex;justify-content:flex-end;gap:8px;align-items:center}
.hero{padding:56px 0}
.pad{background:linear-gradient(180deg,rgba(0,0,0,.58),rgba(0,0,0,.46));border:1px solid color-mix(in srgb,var(--red) 22%, var(--border));border-radius:18px;padding:22px;box-shadow:0 18px 48px rgba(0,0,0,.5)}
h1{margin:8px 0 10px;font-size:clamp(28px,4.5vw,48px)}
.lead{color:var(--muted)}
.actions{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
.btn{background:#1b1c23;color:#fff;border:1px solid color-mix(in srgb,var(--red) 58%, var(--border));padding:12px 18px;border-radius:12px;font-weight:800;box-shadow:0 0 36px color-mix(in srgb,var(--red) 52%, transparent)}
section[data-view]{display:none;padding:28px 0}
body[data-view="home"] [data-view="home"],
body[data-view="pricing"] [data-view="pricing"],
body[data-view="voice"] [data-view="voice"],
body[data-view="images"] [data-view="images"],
body[data-view="articles"] [data-view="articles"],
body[data-view="subs"] [data-view="subs"],
body[data-view="contact"] [data-view="contact"],
body[data-view="admin"] [data-view="admin"]{display:block}
.grid3{display:grid;gap:12px;grid-template-columns:repeat(12,1fr)}
.cell{grid-column:span 4;background:color-mix(in srgb,var(--card) 92%, transparent);border:1px solid var(--border);border-radius:14px;overflow:hidden}
.cell img{display:block;width:100%;height:auto}
@media(max-width:960px){.cell{grid-column:span 6}}@media(max-width:640px){.cell{grid-column:span 12}}
footer{margin-top:48px;padding:24px 0 40px;border-top:1px solid var(--border);color:var(--muted)}
.admin-link{background:#14141c;color:#cfd2de;border:1px solid var(--border);padding:6px 12px;border-radius:999px}
</style>
</head>
<body data-theme="RD" data-view="home">
<header class="topbar">
  <div class="container topbar-inner">
    <div class="brand"><span class="brand-icon"><img src="logo_32.png" alt=""></span><span>Softis</span></div>
    <nav class="mainnav" aria-label="Навігація">
      <a class="nav-pill" href="#/" data-route="home">Головна</a>
      <a class="nav-pill" href="#/pricing" data-route="pricing">Ціни</a>
      <a class="nav-pill" href="#/voice" data-route="voice">Озвучка</a>
      <a class="nav-pill" href="#/images" data-route="images">Генерація зображень</a>
      <a class="nav-pill" href="#/articles" data-route="articles">Оновлення</a>
      <a class="nav-pill" href="#/subs" data-route="subs">Субтитри</a>
      <a class="nav-pill" href="#/contact" data-route="contact">Контакти</a>
    </nav>
    <div class="switcher">
      <span>Тема:</span>
      <button class="pill theme-toggle" type="button" aria-label="Змінити тему">☀️</button>
    </div>
  </div>
</header>

<main>
  <section class="hero" data-view="home">
    <div class="container">
      <div class="pad">
        <h1>Ми ваш помічник в створенні контенту для YouTube.</h1>
        <p class="lead">Це софт, який допомагає вам створювати озвучку, генерувати зображення та створювати субтитри.</p>
        <div class="actions">
          <a class="btn" href="#/pricing">Спробувати безкоштовно</a>
          <a class="btn" href="#/images">Дивитися приклади</a>
        </div>
      </div>
    </div>
  </section>

  <section data-view="pricing"><div class="container"><h2>Ціни</h2></div></section>
  <section data-view="voice"><div class="container"><h2>Приклади озвучки</h2></div></section>
  <section data-view="images"><div class="container"><h2>Генерація зображень</h2><div class="grid3">
    <figure class="cell"><img loading="lazy" src="https://picsum.photos/seed/yt1/600/380" alt=""></figure>
    <figure class="cell"><img loading="lazy" src="https://picsum.photos/seed/yt2/600/380" alt=""></figure>
    <figure class="cell"><img loading="lazy" src="https://picsum.photos/seed/yt3/600/380" alt=""></figure>
  </div></div></section>

  <section data-view="articles"><div class="container">
    <h2>Оновлення</h2><div id="articlesGrid" class="grid3"></div>
  </div></section>

  <section data-view="subs"><div class="container"><h2>Приклади субтитрів</h2></div></section>
  <section data-view="contact"><div class="container"><h2>Зворотний зв'язок</h2></div></section>

  <section data-view="admin"><div class="container">
    <h2>Адмін-панель</h2>
    <div id="adminGate">
      <label for="adminPass">Пароль:</label>
      <input id="adminPass" type="password" placeholder="Пароль">
      <button id="adminLogin" class="pill" type="button">Увійти</button>
      <p class="muted">Пароль: <code>Skrypka</code></p>
    </div>
    <form id="adminForm" style="display:none;max-width:820px;margin-top:12px">
      <div><label>Заголовок<input id="aTitle" required></label></div>
      <div><label>Короткий опис<input id="aExcerpt" required></label></div>
      <div><label>Основний текст<textarea id="aContent" rows="8" required></textarea></label></div>
      <div><label>Картинка<input id="aImage" type="file" accept="image/*"></label></div>
      <button class="btn" type="submit">Опублікувати</button>
      <p id="adminStatus" class="muted"></p>
    </form>
  </div></section>
</main>

<footer><div class="container" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
  <span>© 2025 Softis</span><a class="admin-link" href="#/admin">Admin</a>
</div></footer>

<script type="module">
// Router
const routes = ["home","pricing","voice","images","articles","subs","contact","admin"];
function setView(v){ document.body.dataset.view = v; document.querySelectorAll('.mainnav .nav-pill').forEach(a=>a.setAttribute('aria-current',a.dataset.route===v?'page':'false')); }
function onHash(){ const r = (location.hash.replace('#/','') || '').trim() || 'home'; setView(routes.includes(r)?r:'home'); if(r==='articles') loadArticles(); }
addEventListener('hashchange', onHash); onHash();

// Theme
document.querySelector('.theme-toggle')?.addEventListener('click',()=>{ const t=document.body.getAttribute('data-theme'); document.body.setAttribute('data-theme', t==='LIGHT'?'RD':'LIGHT');});

// Supabase
import {{ createClient }} from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/+esm";
const sb = createClient("https://zobpfysopstuvvpdtgob.supabase.co", "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InpvYnBmeXNvcHN0dXZ2cGR0Z29iIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg3MjM2MjIsImV4cCI6MjA3NDI5OTYyMn0._0G1I3VtwSVoDT93mPsAiRI4Yf66zFppaCqhhGQgSbw");

async function loadArticles(){
  const grid = document.getElementById('articlesGrid');
  if(!grid) return;
  const {{ data, error }} = await sb.from('articles').select('*').order('created_at', {{ascending:false}}).limit(12);
  if(error){ grid.innerHTML = `<p class='muted'>Помилка: ${{error.message}}</p>`; return; }
  if(!data?.length){ grid.innerHTML = `<p class='muted'>Поки немає записів.</p>`; return; }
  grid.innerHTML = data.map(a => `
    <article class="cell" style="padding:12px">
      ${{a.image? `<img src="${{a.image}}" alt="${{a.title}}" style="border-bottom:1px solid var(--border)">` : ''}}
      <div style="padding:10px 12px">
        <h3 style="margin:6px 0 8px;font-size:18px">${{a.title}}</h3>
        <p class="muted" style="margin:0 0 10px">${{a.excerpt||''}}</p>
        <details><summary>Читати</summary><div style="white-space:pre-wrap">${{a.content||''}}</div></details>
      </div>
    </article>`).join('');
}

// Admin
const gate = document.getElementById('adminGate');
const form = document.getElementById('adminForm');
document.getElementById('adminLogin')?.addEventListener('click',()=>{
  const ok = (document.getElementById('adminPass').value === 'Skrypka');
  gate.style.display = ok?'none':'block'; form.style.display = ok?'block':'none';
});

async function uploadImage(file){
  if(!file) return null; const ext=file.name.split('.').pop();
  const path=`art-${{Date.now()}}-${{Math.random().toString(36).slice(2)}}.${{ext}}`;
  const bucket='images';
  const {{error}} = await sb.storage.from(bucket).upload(path,file);
  if(error) throw error;
  const {{data}} = sb.storage.from(bucket).getPublicUrl(path);
  return data.publicUrl;
}

form?.addEventListener('submit', async (e)=>{
  e.preventDefault();
  const status=document.getElementById('adminStatus');
  const title=document.getElementById('aTitle').value.trim();
  const excerpt=document.getElementById('aExcerpt').value.trim();
  const content=document.getElementById('aContent').value.trim();
  const file=document.getElementById('aImage').files[0];
  if(!title||!content){ status.textContent='Заповніть Заголовок і Контент'; return; }
  try{ let imageUrl=null; if(file) imageUrl=await uploadImage(file);
    const {{error}}=await sb.from('articles').insert({{title,excerpt,content,image:imageUrl}});
    if(error) throw error;
    status.textContent='Опубліковано!'; e.target.reset();
  }catch(err){ status.textContent='Помилка: '+err.message; }
});
</script>
</body>
</html>
